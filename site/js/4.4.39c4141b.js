webpackJsonp([4],{VKKr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("SldL");var a=s("7hDC"),n=s.n(a),r=s("Biqn"),i=s.n(r),o=s("NYxO"),l=Object(o["a"])("user"),u=l.mapState,m=l.mapActions,c={data:function(){return{lang:"",username:"",email:"",password:"",passwordConfirm:"",passVisible:!1,alertConfirmed:!0,passConfirmVisible:!1,isSend:!1,isConfirmed:!1,loadingEmail:!1}},computed:i()({},u({langStore:function(e){return e.lang},usernameStore:function(e){return e.username},emailStore:function(e){return e.email}}),{languages:function(){return this.$store.state.languages},isEmailChange:function(){return this.email!==this.emailStore},isUsernameChange:function(){return this.username!==this.usernameStore},isLangChange:function(){return this.lang!==this.langStore},isSubmitDisabled:function(){return!(this.isEmailChange||this.isUsernameChange||this.isLangChange||this.password)||this.errors.any()}}),methods:i()({},m(["userUpdate"]),{onSubmit:function(){var e=n()(regeneratorRuntime.mark(function e(){var t,s,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.email,s=this.isEmailChange,e.next=3,this.$validator.validateAll(i()({},s?{email:t}:null));case 3:if(a=e.sent,!a){e.next=15;break}return n={},this.isUsernameChange&&(n.username=this.username),s&&(n.email=t),this.password&&(n.password=this.password),this.lang!==this.langStore&&(n.lang=this.lang),e.next=12,this.userUpdate(n);case 12:r=e.sent,this.isSend=!0,this.isConfirmed=r;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onBack:function(){this.$router.push({name:"signIn"})},onCancel:function(){this.setLocalUserInfo()},setLocalUserInfo:function(){this.lang=this.langStore,this.username=this.usernameStore,this.email=this.emailStore,this.password=this.passwordConfirm=""},onInputEmail:function(){var e=n()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isEmailChange){e.next=4;break}return this.loadingEmail=!0,e.next=4,this.$validator.validate("email",t);case 4:this.loadingEmail=!1;case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),created:function(){this.setLocalUserInfo(),this.$validator.attach({name:"email",rules:{required:!0,email:!0,check_email:!0},delay:500})},i18n:{messages:{en:{confirmedSuccess:"Success.",confirmedFail:"The operation failed, please try again later.",removeUser:"Remove Accaunt"},ru:{confirmedSuccess:"Сохранено.",confirmedFail:"Ошибка, попробуйте сохранить повторно.",removeUser:"Удалить профиль"}}}},d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{attrs:{height:"100%"}},[s("v-card-text",[s("v-container",{attrs:{"grid-list-lg":""}},[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm5:"",md3:""}},[s("v-btn",{attrs:{block:""},domProps:{textContent:e._s(e.$t("removeUser"))},on:{click:function(e){}}})],1)],1),s("v-layout",[s("v-flex",{attrs:{xs5:""}},[s("span",{domProps:{textContent:e._s(e.$t("notificationLanguage"))}}),s("v-radio-group",{attrs:{row:e.$vuetify.breakpoint.smAndUp},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}},e._l(e.languages,function(e,t){return s("v-radio",{key:t,attrs:{primary:"",label:e.title,value:e.lang}})}))],1)],1),s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",md6:""}},[s("v-text-field",{directives:[{name:"focus",rawName:"v-focus"},{name:"validate",rawName:"v-validate",value:{min:5,max:30,alpha:!0},expression:"{ min: 5, max: 30, alpha: true }"}],attrs:{"data-focus":"",label:e.$t("username"),"error-messages":e.errors.collect("username"),"data-vv-name":"username"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$refs.email.focus()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("v-flex",{attrs:{xs12:"",md6:""}},[s("v-text-field",{ref:"email",attrs:{label:e.$t("email"),"error-messages":e.errors.collect("email"),loading:e.loadingEmail},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$refs.password.focus()},input:e.onInputEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),s("v-flex",{attrs:{xs12:"",md6:""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{min:5,max:30,regex:/^\S+$/},expression:"{ min: 5, max: 30, regex: /^\\S+$/ }"}],ref:"password",attrs:{label:e.$t("password"),"append-icon":e.passVisible?"visibility":"visibility_off","append-icon-cb":function(){return e.passVisible=!e.passVisible},"error-messages":e.errors.collect("password"),type:e.passVisible?"text":"password",name:"password","data-vv-name":"password"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$refs.passwordConfirm.focus()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("v-flex",{attrs:{xs12:"",md6:""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{confirmed:"password"},expression:'{ confirmed: "password" }'}],ref:"passwordConfirm",attrs:{label:e.$t("passwordConfirm"),"append-icon":e.passConfirmVisible?"visibility":"visibility_off","append-icon-cb":function(){return e.passConfirmVisible=!e.passConfirmVisible},"error-messages":e.errors.collect("passwordConfirm"),type:e.passConfirmVisible?"text":"password","data-vv-name":"passwordConfirm"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onSubmit(t):null}},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}})],1)],1),e.isSend?s("v-layout",[s("v-flex",[s("v-alert",{attrs:{type:e.isConfirmed?"success":"error",dismissible:""},model:{value:e.alertConfirmed,callback:function(t){e.alertConfirmed=t},expression:"alertConfirmed"}},[e._v(e._s(e.isConfirmed?e.$t("confirmedSuccess"):e.$t("confirmedFail")))])],1)],1):e._e()],1)],1),s("v-card-actions",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-spacer",{staticClass:"hidden-xs-only"}),s("v-flex",{attrs:{xs12:"",sm5:"",md3:""}},[s("v-btn",{attrs:{block:"",flat:""},domProps:{textContent:e._s(e.$t("cancel"))},on:{click:e.onCancel}})],1),s("v-flex",{attrs:{xs12:"",sm5:"",md3:""}},[s("v-btn",{attrs:{block:"",flat:"",color:"primary",disabled:e.isSubmitDisabled},domProps:{textContent:e._s(e.$t("save"))},on:{click:e.onSubmit}})],1)],1)],1)],1)],1)},f=[],p=s("XyMi"),v=!1,h=null,g=null,b=null,x=Object(p["a"])(c,d,f,v,h,g,b);t["default"]=x.exports}});