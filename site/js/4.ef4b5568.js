webpackJsonp([4],{VKKr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});t("SldL");var s=t("7hDC"),n=t.n(s),r=t("Biqn"),i=t.n(r),o=t("NYxO"),l=Object(o["a"])("user"),u=l.mapState,m=l.mapActions,c={data:function(){return{lang:"",username:"",email:"",password:"",passwordConfirm:"",passVisible:!1,alertConfirmed:!0,passConfirmVisible:!1,isSend:!1,isConfirmed:!1,loadingEmail:!1}},computed:i()({},u({langStore:function(e){return e.lang},usernameStore:function(e){return e.username},emailStore:function(e){return e.email}}),{languages:function(){return this.$store.state.languages},isEmailChange:function(){return this.email!==this.emailStore},isUsernameChange:function(){return this.username!==this.usernameStore},isLangChange:function(){return this.lang!==this.langStore},isSubmitDisabled:function(){return!(this.isEmailChange||this.isUsernameChange||this.isLangChange||this.password)||this.errors.any()}}),methods:i()({},m(["userUpdate"]),{onSubmit:function(){var e=n()(regeneratorRuntime.mark(function e(){var a,t,s,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.email,t=this.isEmailChange,e.next=3,this.$validator.validateAll(i()({},t?{email:a}:null));case 3:if(s=e.sent,!s){e.next=15;break}return n={},this.isUsernameChange&&(n.username=this.username),t&&(n.email=a),this.password&&(n.password=this.password),this.lang!==this.langStore&&(n.lang=this.lang),e.next=12,this.userUpdate(n);case 12:r=e.sent,this.isSend=!0,this.isConfirmed=r;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onBack:function(){this.$router.push({name:"signIn"})},onCancel:function(){this.setLocalUserInfo()},setLocalUserInfo:function(){this.lang=this.langStore,this.username=this.usernameStore,this.email=this.emailStore,this.password=this.passwordConfirm=""},onInputEmail:function(){var e=n()(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isEmailChange){e.next=4;break}return this.loadingEmail=!0,e.next=4,this.$validator.validate("email",a);case 4:this.loadingEmail=!1;case 6:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()}),created:function(){this.setLocalUserInfo(),this.$validator.attach({name:"email",rules:{required:!0,email:!0,check_email:!0},delay:500})},i18n:{messages:{en:{confirmedSuccess:"Success.",confirmedFail:"The operation failed, please try again later."},ru:{confirmedSuccess:"Сохранено.",confirmedFail:"Ошибка, попробуйте сохранить повторно."}}}},d=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",{attrs:{height:"100%"}},[t("v-card-text",[t("v-layout",{attrs:{row:""}},[t("v-flex",{attrs:{xs5:""}},[t("span",{domProps:{textContent:e._s(e.$t("notificationLanguage"))}}),t("v-radio-group",{attrs:{row:e.$vuetify.breakpoint.smAndUp},model:{value:e.lang,callback:function(a){e.lang=a},expression:"lang"}},e._l(e.languages,function(e,a){return t("v-radio",{key:a,attrs:{primary:"",label:e.title,value:e.lang}})}))],1)],1),t("v-container",{attrs:{"grid-list-lg":""}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:"",md6:""}},[t("v-text-field",{directives:[{name:"focus",rawName:"v-focus"},{name:"validate",rawName:"v-validate",value:{min:5,max:30,alpha:!0},expression:"{ min: 5, max: 30, alpha: true }"}],attrs:{"data-focus":"",label:e.$t("username"),"error-messages":e.errors.collect("username"),"data-vv-name":"username"},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.$refs.email.focus()}},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}})],1),t("v-flex",{attrs:{xs12:"",md6:""}},[t("v-text-field",{ref:"email",attrs:{label:e.$t("email"),"error-messages":e.errors.collect("email"),loading:e.loadingEmail},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.$refs.password.focus()},input:e.onInputEmail},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}})],1),t("v-flex",{attrs:{xs12:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{min:5,max:30,regex:/^\S+$/},expression:"{ min: 5, max: 30, regex: /^\\S+$/ }"}],ref:"password",attrs:{label:e.$t("password"),"append-icon":e.passVisible?"visibility":"visibility_off","append-icon-cb":function(){return e.passVisible=!e.passVisible},"error-messages":e.errors.collect("password"),type:e.passVisible?"text":"password",name:"password","data-vv-name":"password"},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.$refs.passwordConfirm.focus()}},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1),t("v-flex",{attrs:{xs12:"",md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:{confirmed:"password"},expression:'{ confirmed: "password" }'}],ref:"passwordConfirm",attrs:{label:e.$t("passwordConfirm"),"append-icon":e.passConfirmVisible?"visibility":"visibility_off","append-icon-cb":function(){return e.passConfirmVisible=!e.passConfirmVisible},"error-messages":e.errors.collect("passwordConfirm"),type:e.passConfirmVisible?"text":"password","data-vv-name":"passwordConfirm"},on:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.onSubmit(a):null}},model:{value:e.passwordConfirm,callback:function(a){e.passwordConfirm=a},expression:"passwordConfirm"}})],1)],1),e.isSend?t("v-layout",[t("v-flex",[t("v-alert",{attrs:{type:e.isConfirmed?"success":"error",dismissible:""},model:{value:e.alertConfirmed,callback:function(a){e.alertConfirmed=a},expression:"alertConfirmed"}},[e._v(e._s(e.isConfirmed?e.$t("confirmedSuccess"):e.$t("confirmedFail")))])],1)],1):e._e()],1)],1),t("v-card-actions",[t("v-container",{attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{wrap:""}},[t("v-spacer",{staticClass:"hidden-xs-only"}),t("v-flex",{attrs:{xs12:"",sm5:"",md3:""}},[t("v-btn",{attrs:{block:"",flat:""},domProps:{textContent:e._s(e.$t("cancel"))},on:{click:e.onCancel}})],1),t("v-flex",{attrs:{xs12:"",sm5:"",md3:""}},[t("v-btn",{attrs:{block:"",flat:"",color:"primary",disabled:e.isSubmitDisabled},domProps:{textContent:e._s(e.$t("save"))},on:{click:e.onSubmit}})],1)],1)],1)],1)],1)},f=[],p=t("XyMi"),v=!1,h=null,g=null,b=null,x=Object(p["a"])(c,d,f,v,h,g,b);a["default"]=x.exports}});
//# sourceMappingURL=4.ef4b5568.js.map